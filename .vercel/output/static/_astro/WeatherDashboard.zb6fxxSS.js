import{j as e}from"./jsx-runtime.BftctW7E.js";import{r as i}from"./index.DJO9vBfz.js";import{a as j,g as N}from"./weather-service.BbyU-1F5.js";import{g as b}from"./turbine-service.CN_jfETl.js";const C=()=>{const[c,m]=i.useState([]),[n,o]=i.useState(""),[t,h]=i.useState(null),[l,p]=i.useState(null),[g,x]=i.useState(!0);i.useEffect(()=>{b().then(s=>{m(s),s.length>0&&o(s[0].id)})},[]),i.useEffect(()=>{if(n){const s=c.find(d=>d.id===n);s&&(x(!0),Promise.all([j(s.location.lat,s.location.lng),s.type==="offshore"?N(s.location.lat,s.location.lng):Promise.resolve(null)]).then(([d,r])=>{h(d),p(r),x(!1)}))}},[n,c]);const u=s=>{const d=["N","NE","E","SE","S","SW","W","NW"],r=Math.round(s/45)%8;return d[r]},a=t?t.windSpeed<3?{status:"stopped",message:"Wind too low for operation"}:t.windSpeed>25?{status:"stopped",message:"Wind too high - safety cutoff"}:t.windSpeed>=12&&t.windSpeed<=15?{status:"optimal",message:"Optimal wind conditions"}:{status:"operational",message:"Normal operation"}:{status:"unknown",message:"No data"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold",children:"Select Turbine Location"}),e.jsx("select",{value:n,onChange:s=>o(s.target.value),className:"px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500",children:c.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.type,")"]},s.id))})]})}),g?e.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-20 bg-gray-200 rounded"})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Current Weather Conditions"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Wind Speed"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-600",children:[t?.windSpeed.toFixed(1)," m/s"]}),e.jsx("p",{className:"text-sm text-gray-500",children:u(t?.windDirection||0)})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Temperature"}),e.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[t?.temperature.toFixed(1),"°C"]})]}),e.jsxs("div",{className:"text-center p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Pressure"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[t?.pressure," hPa"]})]}),e.jsxs("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Humidity"}),e.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:[t?.humidity,"%"]})]})]}),e.jsx("div",{className:`p-4 rounded-lg ${a.status==="optimal"?"bg-green-50 border-green-200":a.status==="stopped"?"bg-red-50 border-red-200":"bg-blue-50 border-blue-200"} border`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Operational Status"}),e.jsx("p",{className:"text-sm mt-1",children:a.message})]}),e.jsx("div",{className:`text-3xl ${a.status==="optimal"?"text-green-600":a.status==="stopped"?"text-red-600":"text-blue-600"}`,children:a.status==="optimal"?"✓":a.status==="stopped"?"✕":"●"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Additional Metrics"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Visibility"}),e.jsxs("p",{className:"text-xl font-semibold",children:[((t?.visibility||0)/1e3).toFixed(1)," km"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Cloud Cover"}),e.jsxs("p",{className:"text-xl font-semibold",children:[t?.cloudCover,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Wind Gust"}),e.jsxs("p",{className:"text-xl font-semibold",children:[t?.windGust.toFixed(1)," m/s"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Precipitation"}),e.jsxs("p",{className:"text-xl font-semibold",children:[t?.precipitation.toFixed(1)," mm/h"]})]})]})]})]}),l&&e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Sea Conditions (Offshore)"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Wave Height"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[l.waveHeight.toFixed(1)," m"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Wave Period"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[l.wavePeriod.toFixed(1)," s"]})]}),e.jsxs("div",{className:"p-4 bg-teal-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Speed"}),e.jsxs("p",{className:"text-2xl font-bold text-teal-600",children:[l.currentSpeed.toFixed(2)," m/s"]})]}),e.jsxs("div",{className:"p-4 bg-teal-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Water Temp"}),e.jsxs("p",{className:"text-2xl font-bold text-teal-600",children:[l.waterTemperature.toFixed(1),"°C"]})]})]}),e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Vessel Operations"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:l.waveHeight<1.5?"Safe for crew transfer vessels":l.waveHeight<2.5?"Caution advised for small vessels":"Dangerous conditions - postpone marine operations"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"24-Hour Forecast"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Time"}),e.jsx("th",{className:"text-left py-2",children:"Conditions"}),e.jsx("th",{className:"text-left py-2",children:"Temp"}),e.jsx("th",{className:"text-left py-2",children:"Wind"}),e.jsx("th",{className:"text-left py-2",children:"Power Output"})]})}),e.jsx("tbody",{children:t?.forecast.map((s,d)=>{const r=s.windSpeed>=3&&s.windSpeed<=25?Math.min(100,s.windSpeed/12*100):0;return e.jsxs("tr",{className:"border-b hover:bg-gray-50",children:[e.jsx("td",{className:"py-2",children:new Date(s.datetime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),e.jsx("td",{className:"py-2 capitalize",children:s.conditions}),e.jsxs("td",{className:"py-2",children:[s.temperature.toFixed(1),"°C"]}),e.jsxs("td",{className:"py-2",children:[s.windSpeed.toFixed(1)," m/s"]}),e.jsx("td",{className:"py-2",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-20 bg-gray-200 rounded-full h-2 mr-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${r}%`}})}),e.jsxs("span",{className:"text-sm",children:[r.toFixed(0),"%"]})]})})]},d)})})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Environmental Monitoring"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Bird Migration"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"No active migration detected"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Next check: 2 hours"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Noise Levels"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Within regulatory limits"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"45.2 dB at nearest residence"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("h4",{className:"font-semibold flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-yellow-500 rounded-full mr-2"}),"Ice Risk"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Low risk - monitoring active"}),e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Temperature: ",t?.temperature.toFixed(1),"°C"]})]})]})]})]})]})};export{C as default};
